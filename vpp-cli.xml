<?xml version="1.0" encoding="UTF-8"?>
<KLISH xmlns="https://klish.libcode.org/klish3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<PLUGIN name="klish"/><PLUGIN name="script"/><PLUGIN name="vpp"/>

<PTYPE name="STRING"><ACTION sym="STRING@klish"/></PTYPE>
<PTYPE name="IFACE"><ACTION sym="STRING@klish"/><COMPL><ACTION sym="vpp_complete_interface@vpp"/></COMPL></PTYPE>
<PTYPE name="IFACE_OR_NEW"><ACTION sym="STRING@klish"/><COMPL><ACTION sym="vpp_complete_interface@vpp"/></COMPL></PTYPE>
<PTYPE name="IP_PREFIX"><ACTION sym="STRING@klish"/></PTYPE>
<PTYPE name="UINT"><ACTION sym="UINT@klish"/></PTYPE>

<VIEW name="main">
<PROMPT name="prompt"><ACTION sym="vpp_prompt@vpp"/></PROMPT>
<COMMAND name="show-interfaces" help="Show interfaces"><ACTION sym="vpp_show_interfaces@vpp"/></COMMAND>
<COMMAND name="show-banner" help="Show system info banner"><ACTION sym="vpp_show_banner@vpp"/></COMMAND>
<COMMAND name="show-version" help="Show version"><ACTION sym="vpp_show_version@vpp"/></COMMAND>
<COMMAND name="show-ip-route" help="Show routes"><ACTION sym="vpp_show_ip_route@vpp"/></COMMAND>
<COMMAND name="show-hardware" help="Show hardware interfaces"><ACTION sym="vpp_show_hardware@vpp"/></COMMAND>
<COMMAND name="show-lcp" help="Show LCP"><ACTION sym="vpp_show_lcp@vpp"/></COMMAND>
<COMMAND name="show-running-config" help="Show running configuration"><ACTION sym="vpp_show_running_config@vpp"/></COMMAND>
<COMMAND name="show-memory-heap" help="Show main heap memory"><ACTION sym="vpp_show_memory_heap@vpp"/></COMMAND>
<COMMAND name="show-memory-map" help="Show memory map"><ACTION sym="vpp_show_memory_map@vpp"/></COMMAND>
<COMMAND name="show-buffers" help="Show buffer pools"><ACTION sym="vpp_show_buffers@vpp"/></COMMAND>
<COMMAND name="show-trace" help="Show packet trace"><ACTION sym="vpp_show_trace@vpp"/></COMMAND>
<COMMAND name="show-error" help="Show error counters"><ACTION sym="vpp_show_error@vpp"/></COMMAND>
<COMMAND name="show-pci" help="Show PCI devices"><ACTION sym="vpp_show_pci@vpp"/></COMMAND>
<COMMAND name="show-bond" help="Show bond details"><ACTION sym="vpp_show_bond@vpp"/></COMMAND>
<COMMAND name="configure" help="Config mode"><ACTION sym="nav">push /config-view</ACTION></COMMAND>
<COMMAND name="ping" help="Ping"><PARAM name="target" ptype="/IP_PREFIX" help="Target"/><ACTION sym="vpp_ping@vpp"/></COMMAND>
<COMMAND name="write-memory" help="Save config"><ACTION sym="vpp_write_memory@vpp"/></COMMAND>
<COMMAND name="exit" help="Exit"><ACTION sym="nav">pop</ACTION></COMMAND>
</VIEW>

<VIEW name="config-view">
<PROMPT name="prompt"><ACTION sym="prompt">%h(config)# </ACTION></PROMPT>
<COMMAND name="interface" help="Configure interface (auto-creates loopback/VLAN)">
    <PARAM name="interface" ptype="/IFACE_OR_NEW" help="Interface name"/>
    <ACTION sym="vpp_enter_interface@vpp"/><ACTION sym="nav">push /interface-view</ACTION>
</COMMAND>
<COMMAND name="no" help="Delete/negate commands">
    <COMMAND name="interface" help="Delete interface (loopback/VLAN only)">
        <PARAM name="interface" ptype="/IFACE" help="Interface to delete"/>
        <ACTION sym="vpp_no_interface@vpp"/>
    </COMMAND>
</COMMAND>
<COMMAND name="ip" help="IP commands">
    <COMMAND name="route" help="Add static route">
        <PARAM name="network" ptype="/IP_PREFIX" help="Destination network (x.x.x.x/y)"/>
        <COMMAND name="next-hop" help="Next hop address">
            <PARAM name="gateway" ptype="/IP_PREFIX" help="Next hop IP address"/>
            <ACTION sym="vpp_add_ip_route@vpp"/>
        </COMMAND>
    </COMMAND>
</COMMAND>
<COMMAND name="end" help="Exit config"><ACTION sym="nav">pop</ACTION></COMMAND>
<COMMAND name="exit" help="Exit config"><ACTION sym="nav">pop</ACTION></COMMAND>
</VIEW>

<VIEW name="interface-view">
<PROMPT name="prompt"><ACTION sym="prompt">%h(config-if)# </ACTION></PROMPT>
<COMMAND name="ip" help="IP configuration">
    <COMMAND name="address" help="Set IPv4 address">
        <PARAM name="address" ptype="/IP_PREFIX" help="Address (x.x.x.x/y)"/>
        <ACTION sym="vpp_config_interface_ip@vpp"/>
    </COMMAND>
</COMMAND>
<COMMAND name="ipv6" help="IPv6 configuration">
    <COMMAND name="address" help="Set IPv6 address">
        <PARAM name="address" ptype="/IP_PREFIX" help="Address (x::x/y)"/>
        <ACTION sym="vpp_config_interface_ipv6@vpp"/>
    </COMMAND>
</COMMAND>
<COMMAND name="no" help="Negate/Remove configuration">
    <COMMAND name="ip" help="Remove IP configuration">
        <COMMAND name="address" help="Remove IPv4 address">
            <PARAM name="address" ptype="/IP_PREFIX" help="Address"/>
            <ACTION sym="vpp_no_interface_ip@vpp"/>
        </COMMAND>
    </COMMAND>
    <COMMAND name="ipv6" help="Remove IPv6 configuration">
        <COMMAND name="address" help="Remove IPv6 address">
            <PARAM name="address" ptype="/IP_PREFIX" help="Address"/>
            <ACTION sym="vpp_no_interface_ipv6@vpp"/>
        </COMMAND>
    </COMMAND>
    <COMMAND name="lcp" help="Remove LCP"><ACTION sym="vpp_lcp_delete_current@vpp"/></COMMAND>
    <COMMAND name="member" help="Remove member from this bond">
        <PARAM name="member" ptype="/IFACE" help="Member interface to remove"/>
        <ACTION sym="vpp_bond_del_member@vpp"/>
    </COMMAND>
</COMMAND>
<COMMAND name="mtu" help="Set MTU"><PARAM name="mtu" ptype="/UINT" help="MTU value"/><ACTION sym="vpp_set_mtu@vpp"/></COMMAND>
<COMMAND name="lcp" help="Create LCP"><PARAM name="hostif" ptype="/STRING" help="Host interface"/><ACTION sym="vpp_lcp_create_current@vpp"/></COMMAND>
<COMMAND name="enable" help="Enable interface"><ACTION sym="vpp_interface_up@vpp"/></COMMAND>
<COMMAND name="disable" help="Disable interface"><ACTION sym="vpp_interface_down@vpp"/></COMMAND>
<COMMAND name="mode" help="Set bond mode (for new bonds)">
    <PARAM name="mode" ptype="/STRING" help="Bond mode: lacp, xor, round-robin, active-backup, broadcast"/>
    <ACTION sym="vpp_bond_set_mode@vpp"/>
</COMMAND>
<COMMAND name="load-balance" help="Set load-balance algorithm (for new bonds)">
    <PARAM name="lb" ptype="/STRING" help="Load balance: l2, l23, l34"/>
    <ACTION sym="vpp_bond_set_load_balance@vpp"/>
</COMMAND>
<COMMAND name="member" help="Add member to this bond">
    <PARAM name="member" ptype="/IFACE" help="Member interface to add"/>
    <ACTION sym="vpp_bond_add_member@vpp"/>
</COMMAND>
<COMMAND name="exit" help="Back to config"><ACTION sym="vpp_exit_interface@vpp"/><ACTION sym="nav">pop</ACTION></COMMAND>
<COMMAND name="end" help="Back to main"><ACTION sym="vpp_exit_interface@vpp"/><ACTION sym="nav">top /main</ACTION></COMMAND>
</VIEW>

</KLISH>
